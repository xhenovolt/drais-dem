# DRAIS System Cron Jobs

# Process notification queue every 5 minutes
*/5 * * * * cd /path/to/drais && node workers/processNotifications.js >> /var/log/drais-notifications.log 2>&1

# Check conversational triggers once daily at 9 AM
0 9 * * * cd /path/to/drais && node workers/conversationalTriggers.js >> /var/log/drais-triggers.log 2>&1

# Clean up expired feature flags every 6 hours
0 */6 * * * cd /path/to/drais && node workers/cleanupFeatureFlags.js >> /var/log/drais-feature-flags.log 2>&1

# Clean up old notifications (older than 90 days) weekly
0 2 * * 0 cd /path/to/drais && mysql -u username -p password drais_school -e "DELETE FROM notifications WHERE created_at < DATE_SUB(NOW(), INTERVAL 90 DAY) AND deleted_at IS NOT NULL;" >> /var/log/drais-cleanup.log 2>&1
